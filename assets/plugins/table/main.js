!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/material"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/platform-browser"),require("adm.@angular/core")):"function"==typeof define&&define.amd?define(["adm.@angular/common","adm.tslib","adm.@angular/material","adm.@angular/forms","adm.@angular/cdk","adm.rxjs","adm.lodash","adm.rxjs/operators","adm.shared","adm.@angular/platform-browser","adm.@angular/core"],e):"object"==typeof exports?exports.table=e(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/material"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/platform-browser"),require("adm.@angular/core")):t.table=e(t["adm.@angular/common"],t["adm.tslib"],t["adm.@angular/material"],t["adm.@angular/forms"],t["adm.@angular/cdk"],t["adm.rxjs"],t["adm.lodash"],t["adm.rxjs/operators"],t["adm.shared"],t["adm.@angular/platform-browser"],t["adm.@angular/core"])}("undefined"!=typeof self?self:this,function(t,e,n,i,o,a,r,s,l,c,u){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,(function(e){return t[e]}).bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/plugins/table",n(n.s=0)}({0:function(t,e,n){t.exports=n("P+m1")},"0S4P":function(e,n){e.exports=t},"17wl":function(t,n){t.exports=e},"2caw":function(t,e){t.exports=n},"3xDq":function(t,e){t.exports=i},"8Yb7":function(t,e){t.exports=o},"P+m1":function(t,e,n){"use strict";n.r(e),n.d(e,"TableModule",function(){return nt});var i=n("cfyg"),o=n("2caw"),a=n("vOrQ"),r=n("YLtl"),s=n("Vgaj"),l=n("aP7H"),c=function(){function t(){this.container=[],this.maxBufferSize=1e4}return t.prototype.set=function(t,e){var n=t%this.maxBufferSize,i=this.container[n];i?(i.index=t,i.data=e,i.bufferindex=n,this.container[n]=i):this.container[n]={index:t,data:e,bufferindex:n}},t.prototype.get=function(t){var e=this.container[t%this.maxBufferSize];return e&&e.index!==t?null:e},t.prototype.clear=function(t,e){for(var n=t<=e?e:t,i=t<=e?t:e;i<=n;i++){var o=this.container[i%this.maxBufferSize];if(o){console.log("delete,",o.data);for(var a=0,r=Object.keys(o);a<r.length;a++)delete o[r[a]]}}},t.prototype.clearAll=function(){console.log("BUFFER CLEARALL"),this.container.forEach(function(t){var e=t;if(e){e.index=-1;for(var n=0,i=Object.keys(e);n<i.length;n++)delete e[i[n]]}})},t}(),u=function(){function t(t,e){var n=this;this.config=t,this.sanitizer=e,this.ngUnsubscribe=new s.Subject,this.resultSubject=new s.BehaviorSubject(null),this.result$=this.resultSubject.asObservable(),this.loadDataStart=new s.Subject,this.triggerLoadData=new s.Subject,this.currentRequests=[],this.columns=[],this.displayedColumns=[],this.keyIds=[],this.indexes=[],this.cursorAbsPos=0,this.data={},this.viewpos=0,this.rows={},this.totalsize=0,this.predefinedStyles=[],this.initialBrowseRequestHappend=!1,this.state={keys:{"#position":"first"},prevKeys:null,prevSelectedColumnIndex:null,cursor:0,count:1,index:1,before:10,after:10,cursorPosPercent:0,totalsize:0,cursorpos:0,selectedColumnIndex:0,selectedRowIndex:0,selectedHeaderColumnIndex:0,navigationColumnIndex:0,navigationRowIndex:0,successfulDataUpdate:!1},this.buffer=new c,this.autoRefresh=0,this.counter=0,this.keyChangedByFrontend=!1,this.triggerLoadData.pipe(Object(l.takeUntil)(this.ngUnsubscribe)).subscribe(function(t){n.loadData()})}return t.prototype.connect=function(){return this.resultSubject.asObservable()},t.prototype.disconnect=function(){this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.resultSubject.complete(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.prototype.setAutoRefresh=function(){var t=this;this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.autoRefresh&&(this.refreshTimeout=setTimeout(function(){t.loadData(),t.autoRefresh&&t.setAutoRefresh()},this.autoRefresh))},t.prototype.loadData=function(t){var e=this;void 0===t&&(t=0),this.clearRequests();var n=t;return this.counter++,new Promise(function(i,o){var a={subscription:null,observable:null,shift:t,timeout:null,resolvePromise:i,rejectPromise:o};e.state.cursorPosPercent=e.state.cursor/(e.state.count-1),e.state.selectedRowIndex=e.cursorAbsPos,e.loadDataStart.next(e.state);var r=isNaN(e.state.cursorpos)?0:e.state.cursorpos;a.timeout=setTimeout(function(){e.currentRequests[e.currentRequests.length-1]!==a&&(e.clearRequest(a),e.startLatestRequest())},1e3),a.observable=e.config.listFunction(e.state.keys,r,n,Math.max(e.state.count,1),e.state.index,e.state.before,e.state.after,e.state.columnWidths),e.currentRequests.push(a),e.currentRequests.length<=1&&e.startLatestRequest()})},t.prototype.startLatestRequest=function(){var t=this.currentRequests[this.currentRequests.length-1];t&&!t.subscription&&(t.subscription=this.subscribeTo(t))},t.prototype.subscribeTo=function(t){var e=this;return t.observable.pipe(Object(l.takeUntil)(this.ngUnsubscribe),Object(l.catchError)(function(){return Object(s.of)([])})).subscribe(function(n){e.updateData(n),e.clearRequest(t),e.startLatestRequest(),e.initialBrowseRequestHappend=!0,t.resolvePromise(n)},function(n){e.clearRequest(t),e.startLatestRequest(),t.rejectPromise()})},t.prototype.calculateShift=function(t){for(var e=t,n=0,i=this.currentRequests;n<i.length;n++)e+=i[n].shift;return e},t.prototype.setKeys=function(t){t&&(this.state.keys=Object(r.cloneDeep)(t),0!==this.currentRequests.length&&(this.clearRequests(),this.loadData()))},t.prototype.clearRequest=function(t){for(var e=this.currentRequests.indexOf(t),n=0;n<=e;n++){var i=this.currentRequests[0];i.subscription&&i.subscription.unsubscribe(),i.timeout&&clearTimeout(i.timeout),i.subscription=null,this.currentRequests.shift()}},t.prototype.clearRequests=function(){for(var t=this.currentRequests.length,e=0;e<t;e++){var n=this.currentRequests[0];n.subscription&&n.subscription.unsubscribe(),n.timeout&&clearTimeout(n.timeout),n.subscription=null,this.currentRequests.shift()}},t.prototype.updateData=function(t){if(t&&t.data){var e=parseInt(t.totalsize,10),n=parseInt(t.viewpos,10),i=parseInt(t.cursorpos,10);this.data=t,this.totalsize=e,this.state.totalsize=this.totalsize,this.viewpos=n-1,this.predefinedStyles=t.predefinedStyles,this.rows=[];for(var o=0;o<this.data.before.length;o++)this.rows[a=this.viewpos-this.data.before.length+o]=r=this.data.before[o],this.setData(a,r);for(o=0;o<this.data.data.length;o++){var a=this.viewpos+o;this.rows[this.viewpos+o]=r=this.data.data[o],this.setData(a,r)}for(o=0;o<this.data.after.length;o++){var r;this.rows[a=this.viewpos+this.data.data.length+o]=r=this.data.after[o],this.setData(a,r)}this.state.keys=t.cursor,this.cursorAbsPos=this.viewpos+i,this.state.cursorpos=parseInt(t.cursorpos,10),this.resultSubject.next(this.rows),this.state.successfulDataUpdate=!0}},t.prototype.setData=function(t,e){var n=this.buffer.get(t);this.buffer.set(t,this.processData(e,null==n?void 0:n.data))},t.prototype.processData=function(t,e){e||((e={}).origData={},e.dataVersion=0,e.styles={},e.processedData=Object(r.cloneDeep)(t));for(var n={},i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];n[a]=a.startsWith("$")&&"string"==typeof t[a]?t[a]!==e.origData[a]?this.sanitizer.bypassSecurityTrustHtml(t[a]):e.processedData[a]:t[a]}e.styles={};for(var s=0,l=this.columns;s<l.length;s++){var c=l[s];e.styles[c.id]={};var u=c.style?Object(r.cloneDeep)(c.style):{},d=c.containerStyle?Object(r.cloneDeep)(c.containerStyle):{},h={},p=t[c.extraCellDefinitions],g=p&&p.style,f=p&&p.containerStyle,m=p&&p.bar,v=p&&void 0!==p.predefinedStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedStyleId],C=p&&void 0!==p.predefinedContainerStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedContainerStyleId],y=p&&void 0!==p.predefinedBarStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedBarStyleId];g&&Object.assign(u,g),v&&Object.assign(u,v),f&&Object.assign(d,f),C&&Object.assign(d,C),m&&Object.assign(h,m),y&&Object.assign(h,y),e.styles[c.id].style=u,e.styles[c.id].containerStyle=d,e.styles[c.id].barStyle=h}return e.processedData=n,e.origData=Object(r.cloneDeep)(t),e},t.prototype.findRowByKeys=function(t){var e=this;if(!this.state.keys)return 0;for(var n=0,i=function(i){var a=t[i];n=i;var r=!0;if(Object.keys(o.state.keys).forEach(function(t){a[t]!==e.state.keys[t]&&(r=!1)}),r)return"break"},o=this,a=t.length-1;a>=0&&"break"!==i(a);a--);return n},t}(),d=n("vG+p"),h=n("8Yb7"),p=n("3xDq"),g=new a.InjectionToken("CONTAINER_DATA"),f=n("0S4P"),m=["inputRef"];function v(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275element"](1,"input",5,6),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",n.data.value)("type","number"===n.data.column.type?"number":"text")}}function C(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",9),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n)}}function y(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"mat-select",7,6),a["\u0275\u0275template"](3,C,2,2,"mat-option",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.toppings),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.toppingList)}}function b(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",3),a["\u0275\u0275template"](1,v,3,2,"ng-container",4),a["\u0275\u0275template"](2,y,4,2,"ng-container",4),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","string"===(null==n.data.column?null:n.data.column.type)||"zeropadded"===(null==n.data.column?null:n.data.column.type)||"number"===(null==n.data.column?null:n.data.column.type)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","select"===(null==n.data.column?null:n.data.column.type))}}function w(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-checkbox",10,6),a["\u0275\u0275listener"]("focusin",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onFocus()})("focusout",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onBlur()}),a["\u0275\u0275elementEnd"]()}2&t&&a["\u0275\u0275property"]("color","primary")}var S=function(t){return{focused:t}},x=function(){function t(t,e,n){this.cd=t,this.renderer=e,this.data=n,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.toppings=new p.FormControl,this.isFocused=!1}return t.prototype.keydown=function(t){switch(t.key){case"Enter":this.data.table.removeEditOverlay(),this.data.table.el.nativeElement.focus()}},t.prototype.clickEvent=function(){this.inputRef.nativeElement.focus(),this.compRef.focus&&this.compRef.focus()},t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;this.focusListener=this.renderer.listen(this.inputRef.nativeElement,"focus",function(){t.isFocused=!0}),this.blurListener=this.renderer.listen(this.inputRef.nativeElement,"blur",function(){t.isFocused=!1}),this.inputRef.nativeElement.focus(),this.compRef.focus&&setTimeout(function(){t.compRef.focus()}),this.cd.detectChanges()},t.prototype.onFocus=function(){this.isFocused=!0},t.prototype.onBlur=function(){this.isFocused=!1},t.prototype.ngOnDestroy=function(){this.focusListener&&this.focusListener(),this.blurListener&&this.blurListener()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](a.Renderer2),a["\u0275\u0275directiveInject"](g))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["app-editpopup"]],viewQuery:function(t,e){if(1&t&&(a["\u0275\u0275viewQuery"](m,!0,a.ElementRef),a["\u0275\u0275viewQuery"](m,!0)),2&t){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.inputRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.compRef=n.first)}},hostBindings:function(t,e){1&t&&a["\u0275\u0275listener"]("keydown",function(t){return e.keydown(t)})("click",function(){return e.clickEvent()})},decls:3,vars:5,consts:[[1,"popupwrapper","mat-elevation-z8",3,"ngClass"],["appearance","outline",4,"ngIf"],[3,"color","focusin","focusout",4,"ngIf"],["appearance","outline"],[4,"ngIf"],["matInput","",3,"value","type"],["inputRef",""],["multiple","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"color","focusin","focusout"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,b,3,2,"mat-form-field",1),a["\u0275\u0275template"](2,w,2,1,"mat-checkbox",2),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](3,S,e.isFocused)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","select"===(null==e.data.column?null:e.data.column.type)||"string"===(null==e.data.column?null:e.data.column.type)||"zeropadded"===(null==e.data.column?null:e.data.column.type)||"number"===(null==e.data.column?null:e.data.column.type)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","boolean"===(null==e.data.column?null:e.data.column.type)))},directives:[f.NgClass,f.NgIf,o.MatFormField,o.MatInput,o.MatSelect,p.NgControlStatus,p.FormControlDirective,f.NgForOf,o.MatOption,o.MatCheckbox],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]{align-items:center;justify-content:center;background:rgba(var(--theme-background-600),1);overflow:hidden;border:1px solid rgba(var(--theme-foreground-500),.2)}[_nghost-%COMP%]   .popupwrapper.focused[_ngcontent-%COMP%]{border:2px solid rgba(var(--theme-primary-500),1)}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{margin:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] {background:none;width:100%;height:100%}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-flex{margin:0;height:100%}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix{border-top:.18em solid transparent;height:100%;width:auto!important}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-outline{display:none;top:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper{margin:0;padding:0;height:100%}"]}),t}(),P=function(){function t(t,e){this.el=t,this.renderer=e,this.admDragEvent=new a.EventEmitter,this.dragData={startX:0,startY:0,deltaX:0,deltaY:0,dX:0,dY:0},this.prevDelta={x:0,y:0}}return t.prototype.ngOnInit=function(){var t=this;this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",function(e){t.dragData.startX=e.clientX,t.dragData.startY=e.cientY,t.dragData.deltaX=t.dragData.deltaY=0,t.prevDelta.x=t.prevDelta.y=0,t.registerMouseListeners()})},t.prototype.onMouseMove=function(t){this.prevDelta.x=this.dragData.deltaX,this.prevDelta.y=this.dragData.deltaY,this.dragData.deltaX=t.clientX-this.dragData.startX,this.dragData.deltaY=t.cientY-this.dragData.startY,this.dragData.dX=this.dragData.deltaX-this.prevDelta.x,this.dragData.dY=this.dragData.deltaY-this.prevDelta.y,this.admDragEvent.emit(this.dragData)},t.prototype.onMouseUp=function(t){this.cleanUpMouseListeners(),this.admDragEvent.emit(null)},t.prototype.registerMouseListeners=function(){var t=this;this.cleanUpMouseListeners(),this.mouseUpListener=this.renderer.listen("window","mouseup",function(e){return t.onMouseUp(e)}),this.mouseMoveListener=this.renderer.listen("window","mousemove",function(e){return t.onMouseMove(e)})},t.prototype.cleanUpMouseListeners=function(){this.mouseUpListener&&this.mouseUpListener(),this.mouseMoveListener&&this.mouseMoveListener()},t.prototype.ngOnDestroy=function(){this.cleanUpMouseListeners(),this.mouseDownListener&&this.mouseDownListener()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.Renderer2))},t.\u0275dir=a["\u0275\u0275defineDirective"]({type:t,selectors:[["","admDrag",""]],outputs:{admDragEvent:"admDragEvent"}}),t}(),R=["tableRef"],O=["scrollerRef"],M=["fakeContentRef"],E=["scrollerContentRef"],_=["bodyRef"],k=["headerRef"],I=["mainRef"],D=function(t){return{left:t}};function z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",18),a["\u0275\u0275listener"]("admDragEvent",function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"](2).colDragEvent(t,i.index)})("dblclick",function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"](2).colDblClick(t,i.index)}),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](1,D,o.colPositions[i.index]+o.columnWidths[i.index]-o.scrollLeft-5+"px"))}}function j(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275template"](1,z,1,3,"div",17),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n.getVisibleColumns())}}var H=function(t,e){return{first:t,last:e}};function L(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",22,23),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"](2).setSelectedHeader(t.index)})("contextmenu",function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"](2).onHeaderContextMenu(t,i,i.index)})("mouseenter",function(){a["\u0275\u0275restoreView"](n);var t=e.index,i=e.$implicit,o=a["\u0275\u0275reference"](1),r=a["\u0275\u0275reference"](3);return a["\u0275\u0275nextContext"](2).mouseEnter(o,r,t,null,i,i.description)}),a["\u0275\u0275element"](2,"div",24,25),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,o=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngStyle",o.getHeaderContainerStyle(i,i.index))("ngClass",a["\u0275\u0275pureFunction2"](4,H,0===i.index,i.index===o.dataSource.columns.length-1)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("innerHTML",i.description,a["\u0275\u0275sanitizeHtml"])("ngStyle",o.getHeaderStyle(i,i.index))}}var W=function(t){return{height:t}};function T(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",19,20),a["\u0275\u0275template"](2,L,4,7,"div",21),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](2,W,n.headerHeight+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.getVisibleColumns())}}function q(t,e){if(1&t&&a["\u0275\u0275element"](0,"div",34),2&t){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngStyle",n.oddRowStyle)}}function F(t,e){if(1&t&&a["\u0275\u0275element"](0,"div",35),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",o.getBarStyle(n,i.data&&i.data.data,n.index))}}var B=function(t,e,n,i){return{columnselected:t,columnnavigation:e,first:n,last:i}};function V(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",28,29),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit,i=a["\u0275\u0275reference"](1),o=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().setSelected(o.data,t.index,"cellClick",i)})("dblclick",function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit,i=a["\u0275\u0275reference"](1),o=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().setSelected(o.data,t.index,"cellDoubleClick",i,o)})("contextmenu",function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,o=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onContextMenu(t,o,i.index)})("mouseenter",function(){a["\u0275\u0275restoreView"](n);var t=e.index,i=e.$implicit,o=a["\u0275\u0275reference"](1),r=a["\u0275\u0275reference"](4),s=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().mouseEnter(o,r,t,s,i)}),a["\u0275\u0275template"](2,q,1,1,"div",30),a["\u0275\u0275element"](3,"div",31,32),a["\u0275\u0275template"](5,F,1,1,"div",33),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,o=a["\u0275\u0275reference"](1),r=a["\u0275\u0275nextContext"]().$implicit,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction4"](7,B,s.dataSource.cursorAbsPos===r.absoluteId&&i.index===s.dataSource.state.selectedColumnIndex,s.activeRow===r.absoluteId&&i.index===s.dataSource.state.navigationColumnIndex,0===i.index,i.index===s.dataSource.columns.length-1))("id","R"+r.absoluteId+"C"+i.index)("ngStyle",s.getContainerStyle(i,r.data&&r.data.data,i.index,r,o)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",r.absoluteId%2==0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",s.getStyle(i,r.data&&r.data.data,i.index))("innerHtml",s.format(s.getCellContent(r,i),i.format),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",null==r||null==r.data||null==r.data.data||null==r.data.data.styles[i.id]?null:r.data.data.styles[i.id].barStyle)}}var A=function(t,e,n){return{rowselected:t,evenrow:e,lastrow:n}};function U(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",26),a["\u0275\u0275template"](1,V,6,12,"div",27),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction3"](4,A,n.absoluteId===i.dataSource.cursorAbsPos,n.absoluteId%2==0,n.absoluteId===i.dataSource.totalsize-1))("ngStyle",i.getRowStyle(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",i.getVisibleColumns())("ngForTrackBy",i.trackByFnCell)}}function N(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"div",36),a["\u0275\u0275elementStart"](2,"div",37),a["\u0275\u0275elementStart"](3,"table"),a["\u0275\u0275elementStart"](4,"tr"),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6,"notfittingRowHeight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"tr"),a["\u0275\u0275elementStart"](10,"td"),a["\u0275\u0275text"](11,"datasource abs position"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"td"),a["\u0275\u0275text"](13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"tr"),a["\u0275\u0275elementStart"](15,"td"),a["\u0275\u0275text"](16,"not fitting rowheight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"td"),a["\u0275\u0275text"](18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"tr"),a["\u0275\u0275elementStart"](20,"td"),a["\u0275\u0275text"](21,"rowStart - rowEnd"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"td"),a["\u0275\u0275text"](23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"tr"),a["\u0275\u0275elementStart"](25,"td"),a["\u0275\u0275text"](26,"totalsize"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"td"),a["\u0275\u0275text"](28),a["\u0275\u0275pipe"](29,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"tr"),a["\u0275\u0275elementStart"](31,"td"),a["\u0275\u0275text"](32,"visibleRowCount"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"td"),a["\u0275\u0275text"](34),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"tr"),a["\u0275\u0275elementStart"](36,"td",38),a["\u0275\u0275text"](37,"scrollPosCoeff"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"td"),a["\u0275\u0275text"](39),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"tr"),a["\u0275\u0275elementStart"](41,"td",38),a["\u0275\u0275text"](42,"smallPage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"td"),a["\u0275\u0275text"](44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"tr"),a["\u0275\u0275elementStart"](46,"td",38),a["\u0275\u0275text"](47,"scrollPosCoeffNormal"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"td"),a["\u0275\u0275text"](49),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"tr"),a["\u0275\u0275elementStart"](51,"td"),a["\u0275\u0275text"](52,"scrollTop"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"td"),a["\u0275\u0275text"](54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"tr"),a["\u0275\u0275elementStart"](56,"td"),a["\u0275\u0275text"](57,"maxScrollPos"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"td"),a["\u0275\u0275text"](59),a["\u0275\u0275pipe"](60,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](61,"tr"),a["\u0275\u0275elementStart"](62,"td"),a["\u0275\u0275text"](63,"fakeScrollerHeight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](64,"td"),a["\u0275\u0275text"](65),a["\u0275\u0275pipe"](66,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](67,"div",37),a["\u0275\u0275elementStart"](68,"table"),a["\u0275\u0275elementStart"](69,"tr"),a["\u0275\u0275elementStart"](70,"td"),a["\u0275\u0275text"](71,"cursorpos"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](72,"td"),a["\u0275\u0275text"](73),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](74,"tr"),a["\u0275\u0275elementStart"](75,"td"),a["\u0275\u0275text"](76,"activeRow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](77,"td"),a["\u0275\u0275text"](78),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](79,"tr"),a["\u0275\u0275elementStart"](80,"td"),a["\u0275\u0275text"](81,"largePage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](82,"td"),a["\u0275\u0275text"](83),a["\u0275\u0275pipe"](84,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](85,"tr"),a["\u0275\u0275elementStart"](86,"td"),a["\u0275\u0275text"](87,"largePageSize"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](88,"td"),a["\u0275\u0275text"](89),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](90,"tr"),a["\u0275\u0275elementStart"](91,"td"),a["\u0275\u0275text"](92,"largePageCoeff"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](93,"td"),a["\u0275\u0275text"](94),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](95,"tr"),a["\u0275\u0275elementStart"](96,"td"),a["\u0275\u0275text"](97,"lastLargePage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](98,"td"),a["\u0275\u0275text"](99),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](100,"tr"),a["\u0275\u0275elementStart"](101,"td"),a["\u0275\u0275text"](102,"adjustedTotalsize"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](103,"td"),a["\u0275\u0275text"](104),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](105,"tr"),a["\u0275\u0275elementStart"](106,"td"),a["\u0275\u0275text"](107,"rowCountOnLastLargePage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](108,"td"),a["\u0275\u0275text"](109),a["\u0275\u0275pipe"](110,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](111,"tr"),a["\u0275\u0275elementStart"](112,"td"),a["\u0275\u0275text"](113,"rowHeight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](114,"td"),a["\u0275\u0275text"](115),a["\u0275\u0275pipe"](116,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](117,"tr"),a["\u0275\u0275elementStart"](118,"td"),a["\u0275\u0275text"](119,"numOfRowSlots"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](120,"td"),a["\u0275\u0275text"](121),a["\u0275\u0275pipe"](122,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](123,"tr"),a["\u0275\u0275elementStart"](124,"td"),a["\u0275\u0275text"](125,"viewportHeight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](126,"td"),a["\u0275\u0275text"](127),a["\u0275\u0275pipe"](128,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate"](n.notfittingRowHeight),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.dataSource.cursorAbsPos),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.notfittingRowHeight),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate2"]("",n.rowStart," - ",n.rowEnd,""),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](29,24,n.totalsize)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](n.visibleRowCount),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.scrollPosCoeff),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.smallPage),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.scrollPosCoeffNormal),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.scrollPos),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](60,26,n.maxScrollPos)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](66,28,n.fakeScrollerHeight)),a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate"](n.dataSource.state.cursorpos),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.activeRow),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](84,30,n.largePage)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](n.largePageSize),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.largePageCoeff),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.lastLargePage),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](n.adjustedTotalsize),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](110,32,n.rowCountOnLastLargePage)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](116,34,n.rowHeight)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](122,36,n.viewportSize/n.rowHeight)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](128,38,n.viewportSize))}}var $=function(t){return{hidetable:t}},X=function(t){return{"d-none":t}},Y=function(t,e){return{show:t,bottom:e}},Q=function(t){return{width:t}},K=function(){function t(t,e,n,i,o,r,l,c,u){this.context=t,this.cd=e,this.formatService=n,this.sanitizer=i,this.overlay=o,this.el=r,this.injector=l,this.renderer=c,this.tooltipService=u,this.ngUnsubscribe=new s.Subject,this.valueChange=new a.EventEmitter,this.cellClick=new a.EventEmitter,this.cellChange=new a.EventEmitter,this.cellDoubleClick=new a.EventEmitter,this.headerCellClick=new a.EventEmitter,this.cellContextMenu=new a.EventEmitter,this.headerCellContextMenu=new a.EventEmitter,this._autoRefresh=0,this.columnWidths=[],this.columnMinWidths=[],this.colPositions=[],this.stickyBreakpoints=[],this.cumulatedColumnWidth=0,this.cumulatedColumnMinWidth=0,this.scrollLeft=0,this.vrows=[],this.oddRowStyle={},this.headerHeight=50,this.rowHeight=50,this.hideHeader=!1,this.simpleNavigation=!1,this.debug=!1,this.selectedRowStyle={},this.selectedCellStyle={},this.tableStyle={},this.inactiveSelectedRowStyle={},this.inactiveSelectedCellStyle={},this.navigationCellStyle={},this.inactiveNavigationCellStyle={},this.resizableColumns=!1,this.witdhInRequest=!1,this.viewportSize=0,this.browserMaxSize=0,this.largePage=0,this.calculatedLargePageSize=3e4,this.largePageSize=0,this.lastLargePage=0,this.rowCountOnLastLargePage=0,this.notfittingRowHeight=0,this.smallPage=0,this.visibleRowCount=0,this.scrollPos=0,this.maxScrollPos=0,this.prevScrollPos=0,this.scrollPosCoeff=0,this.scrollPosCoeffNormal=0,this.scrollBarWidth=0,this.largePageCoeff=0,this.totalsize=-1,this.adjustedTotalsize=0,this.scrollPercent=1,this.fakeScrollerHeight=0,this.manualScroll=!1,this.rowStart=0,this.rowEnd=0,this.prevRowStart=-1,this.prevRowEnd=-1,this.asd=100,this.leavespace=2,this.activeRow=0,this.activeRowPos=0,this.keyOverrides=[],this.isFocused=!1,this.selectedCellDiv=null,this.selectedVrow=null,this.eventListeners={},this.columnsExpandableWidth=!0}return Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},set:function(t){this._columns=t,this.updateColumns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indexes",{get:function(){return this._indexes},set:function(t){this._indexes=t,this.dataSource.indexes=this.indexes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoRefresh",{get:function(){return this._autoRefresh},set:function(t){this._autoRefresh=t,this.dataSource.autoRefresh=this.autoRefresh,this.dataSource.setAutoRefresh()},enumerable:!1,configurable:!0}),t.prototype.resize=function(t){this.scrollEvent(),this.reinit(),this.updateEditOverlay()},t.prototype.focusEvent=function(t){this.isFocused=!0},t.prototype.blurEvent=function(t){this.isFocused=!1},t.prototype.mouseUp=function(t){this.manualScroll=!1},t.prototype.onKeydownHandler=function(t){if(this.keyOverrides.find(function(e){return"any"===e.key||e.key===t.key&&"keydown"===e.trigger}))console.log("OVERRIDE");else switch(t.key){case"ArrowDown":this.goDownBy(1),this.rowChange(),t.preventDefault();break;case"ArrowUp":this.goUpBy(1),this.rowChange(),t.preventDefault();break;case"Home":this.gotoPos(0),this.setActiveRow(0),this.rowChange(),t.preventDefault();break;case"End":this.gotoPos(this.adjustedTotalsize),this.setActiveRow(this.totalsize-1),this.rowChange(),t.preventDefault();break;case"PageUp":this.goUpBy(this.activeRow>this.rowStart&&this.activeRow<this.rowEnd?this.activeRow-this.rowStart:this.visibleRowCount-2),this.rowChange(),t.preventDefault();break;case"PageDown":this.goDownBy(this.activeRow>this.rowStart&&this.activeRow<this.rowEnd?this.rowEnd-this.activeRow:this.visibleRowCount-2),this.rowChange(),t.preventDefault();break;case"Enter":this.setSelected(this.dataSource.buffer.get(this.activeRow),this.dataSource.state.navigationColumnIndex,"cellDoubleClick",this.el.nativeElement.querySelector("#R"+this.activeRow+"C"+this.dataSource.state.navigationColumnIndex)),t.preventDefault();break;case" ":this.setSelected(this.dataSource.buffer.get(this.activeRow),this.dataSource.state.navigationColumnIndex,"cellClick",this.el.nativeElement.querySelector("#R"+this.activeRow+"C"+this.dataSource.state.navigationColumnIndex)),t.preventDefault();break;case"ArrowRight":this.getNavigationCellInViewport(),this.dataSource.state.navigationColumnIndex<this.dataSource.columns.length-1&&(this.dataSource.state.navigationColumnIndex++,this.handleCellChange()),t.preventDefault();break;case"ArrowLeft":this.getNavigationCellInViewport(),this.dataSource.state.navigationColumnIndex>0&&(this.dataSource.state.navigationColumnIndex--,this.handleCellChange()),t.preventDefault()}},t.prototype.getNavigationCellInViewport=function(){this.goDownBy(0)},t.prototype.rowChange=function(){this.simpleNavigation&&this.setSelected(this.dataSource.buffer.get(this.activeRow),this.dataSource.state.navigationColumnIndex,null,null)},t.prototype.goDownBy=function(t){this.totalsize<=1||(this.activeRow<this.rowStart?this.gotoPos(this.activeRow):this.activeRow>this.rowEnd&&this.rowEnd!==this.totalsize-1?this.gotoPos(this.activeRow-this.visibleRowCount+2,!0):(this.activeRow+t<this.totalsize?this.activeRow+=t:this.activeRow=this.totalsize-1,this.activeRow>this.rowEnd-1&&this.gotoPos(this.activeRow-this.visibleRowCount+2,!0)),this.dataSource.state.navigationRowIndex=this.activeRow)},t.prototype.goUpBy=function(t){this.activeRow<this.rowStart?this.gotoPos(this.activeRow):this.activeRow>this.rowEnd&&this.rowEnd!==this.totalsize-1?this.gotoPos(this.activeRow-this.visibleRowCount+2,!0):(this.activeRow-t>=0?this.activeRow-=t:this.activeRow=0,this.activeRow<=this.rowStart&&this.setToExactRow(this.activeRow===this.rowStart&&this.rowEnd===this.totalsize-1?1:this.rowEnd===this.totalsize-1?-1:1),this.activeRow<this.rowStart&&this.gotoPos(this.activeRow)),this.dataSource.state.navigationRowIndex=this.activeRow},t.prototype.setToExactRow=function(t){var e=this.tableRef.nativeElement.scrollTop%this.rowHeight;0!==e&&(this.tableRef.nativeElement.scrollTop-=t<0?e-this.rowHeight:e)},t.prototype.relativeScroll=function(t){this.tableRef.nativeElement.scrollTop+=t},t.prototype.getKeyAtCursor=function(t){if(this.dataSource.data&&this.dataSource.data.data[t])return this.dataSource.data.data[t]},t.prototype.setKeys=function(t){this.dataSource.setKeys(t),this.valueChange.next(this.dataSource.state)},t.prototype.ngOnInit=function(){this.browserMaxSize=this.calcMaxBrowserScrollSize(),this.scrollBarWidth=7},t.prototype.ngAfterViewInit=function(){this.calculateWidths()},t.prototype.init=function(t){var e=this;void 0===t&&(t=!1),this.dataSource.loadDataStart.pipe(Object(l.takeUntil)(this.ngUnsubscribe)).subscribe(function(t){e.valueChange.next(t)}),this.dataSource.connect().pipe(Object(l.takeUntil)(this.ngUnsubscribe)).subscribe(function(t){t&&(e.totalsize!==e.dataSource.totalsize&&(e.totalsize=e.dataSource.totalsize,e.updateSize(),e.pageChange(),e.cd.detectChanges(),e.calculateWidths()),e.updateRows(),e.refreshVrows(),e.cd.detectChanges()),e.valueChange.next(e.dataSource.state)}),this.timeoutHelper=t?setTimeout(function(t){e.reinit()}):setTimeout(function(t){e.cd.detectChanges()})},t.prototype.reinit=function(){this.updateSize(),this.updateRows(),this.pageChange(),this.cd.detectChanges(),this.calculateWidths();var t=this.dataSource.viewpos,e=this.dataSource.viewpos+Math.min(this.dataSource.state.count,this.totalsize-1);if((0!==this.dataSource.state.totalsize||this.dataSource.autoRefresh>0||!this.dataSource.state.successfulDataUpdate)&&(t!==this.rowStart||e<this.rowEnd)){this.prevRowStart=this.rowStart,this.prevRowEnd=this.rowEnd;var n=Math.ceil(this.viewportSize/this.rowHeight)+1,i=Math.max(this.visibleRowCount-2,n-2);this.dataSource.state.count=i,this.updateDataSource(!0)}},t.prototype.onContextMenu=function(t,e,n){var i,o;this.setSelected(e.data,n),this.cellContextMenu.next({e:t,keys:null===(o=null===(i=e.data)||void 0===i?void 0:i.data)||void 0===o?void 0:o.origData,rowAbsoluteIndex:e.absoluteId,column:n})},t.prototype.onHeaderContextMenu=function(t,e,n){this.headerCellContextMenu.next({e:t,column:n})},t.prototype.setSelectedHeader=function(t){this.dataSource.state.selectedHeaderColumnIndex=t,this.headerCellClick.next()},t.prototype.setActiveRow=function(t,e){void 0===e&&(e=null),this.activeRow=t,this.activeRowPos=0,this.dataSource.state.navigationRowIndex=this.activeRow},t.prototype.setSelected=function(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.removeEditOverlay(),t&&t.data&&t.data.processedData&&(this.dataSource.cursorAbsPos=t.index,this.activeRow=t.index,this.dataSource.state.navigationRowIndex=this.activeRow,this.setPrevValues(),this.setKeys(t.data.origData),null!==e&&(this.dataSource.state.selectedColumnIndex=e,this.dataSource.state.navigationColumnIndex=e),"cellClick"===n?this.cellClick.next({rect:null==i?void 0:i.getBoundingClientRect()}):"cellDoubleClick"===n&&this.cellDoubleClick.next({rect:null==i?void 0:i.getBoundingClientRect()})),this.handleCellChange(),this.cd.detectChanges(),this.dataSource.state.cursorpos=this.dataSource.cursorAbsPos-this.rowStart,"cellDoubleClick"===n&&this.openEditOverlay(this.dataSource.state.selectedColumnIndex,this.selectedCellDiv,o)},t.prototype.openEditOverlay=function(t,e,n){if(this.columns[t].editable&&e){n||(n=this.selectedVrow),this.removeEditOverlay();var i=this.overlay.position().flexibleConnectedTo(e).withPositions([{originX:"center",originY:"center",overlayX:"center",overlayY:"center"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"bottom"}]),o=this.overlay.create({positionStrategy:i,width:e.offsetWidth,height:e.offsetHeight}),a=new WeakMap;a.set(g,{table:this,overlayRef:o,column:this.columns[t],value:n.data.data.origData[this.columns[t].id]});var r=new h.PortalInjector(this.injector,a),s=new h.ComponentPortal(x,null,r);o.attach(s),this.currentOverlayData={overlayRef:o,cellDiv:e,vrow:n}}},t.prototype.removeEditOverlay=function(){this.currentOverlayData&&(this.currentOverlayData.overlayRef.detach(),this.currentOverlayData.overlayRef.dispose(),this.currentOverlayData=null)},t.prototype.updateEditOverlay=function(){if(this.currentOverlayData){this.currentOverlayData.overlayRef.updatePosition();var t=this.tableRef.nativeElement.scrollTop,e=this.tableRef.nativeElement.scrollLeft,n=this.tableRef.nativeElement.offsetHeight,i=this.tableRef.nativeElement.offsetWidth,o=this.currentOverlayData.vrow.pos,a=this.currentOverlayData.overlayRef.overlayElement.offsetHeight,r=this.currentOverlayData.cellDiv.offsetLeft,s=this.currentOverlayData.overlayRef.overlayElement.offsetWidth;if(console.log("scrollLeft",e),console.log("cellLeft",this.currentOverlayData.cellDiv.offsetLeft),t>o||t<o-n+a)this.removeEditOverlay();else if(s>i){var l=s-i+20;(e-l>r||r+s-l>e+i)&&this.removeEditOverlay()}else(e>r||r+s>e+i)&&this.removeEditOverlay()}},t.prototype.setPrevValues=function(){this.dataSource.state.prevKeys=this.dataSource.state.keys,this.dataSource.state.prevSelectedColumnIndex=this.dataSource.state.selectedColumnIndex},t.prototype.handleCellChange=function(){for(var t=this.dataSource.state.navigationColumnIndex,e=this.columnWidths.reduce(function(e,n,i){return i<t?e+n:e},0),n=this.columnWidths[t],i=e+n,o=this.tableRef.nativeElement.clientWidth,a=this.tableRef.nativeElement.scrollLeft,r=-1,s=0;s<this.stickyBreakpoints.length;s++)a>this.colPositions[s]-this.stickyBreakpoints[s]&&(r=s);var l=this.stickyBreakpoints[r];i>a+o?this.tableRef.nativeElement.scrollLeft=e-(o-n):e<a+l&&(this.tableRef.nativeElement.scrollLeft=e-l),this.cellChange.next()},t.prototype.gotoPos=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=0;t>=this.adjustedTotalsize&&(t=this.adjustedTotalsize-1e-4,n=this.notfittingRowHeight);var i=this.largePageSize>0?Math.floor(t/this.largePageSize):0;this.largePage=i,this.pageChange(),this.scrollPos=this.tableRef.nativeElement.scrollTop=((this.largePageSize>0?t%this.largePageSize:0)+this.largePageCoeff)*this.rowHeight+n+(e&&this.notfittingRowHeight!==this.rowHeight?this.notfittingRowHeight:0),this.updateRowStartEnd()},t.prototype.showIndicator=function(){var t=this.scrollDirection>=1?this.rowEnd>this.totalsize-1?this.totalsize-1:this.rowEnd:this.rowStart,e=this.vrows.find(function(e){return e.absoluteId===t});return!(e&&e.data&&e.data.data&&e.data.data.origData||this.dataSource.totalsize<=0)},t.prototype.scrollbarMouseDown=function(){this.manualScroll=!0},t.prototype.scrollbarScroll=function(t){this.manualScroll&&this.gotoPos(this.scrollerRef.nativeElement.scrollTop/(this.scrollerRef.nativeElement.scrollHeight-this.scrollerRef.nativeElement.clientHeight)*this.adjustedTotalsize)},t.prototype.scrollEvent=function(){this.updateEditOverlay(),this.scrollPos=this.tableRef.nativeElement.scrollTop,this.scrollDirection=this.prevScrollPos>this.scrollPos?-1:1;var t=(this.rowCountOnLastLargePage+1)*this.rowHeight+(this.notfittingRowHeight!==this.rowHeight?this.notfittingRowHeight-1:0);if(this.largePage===this.lastLargePage&&this.scrollPos>=t&&(this.scrollPos=this.tableRef.nativeElement.scrollTop=t),this.scrollPos>=this.maxScrollPos&&this.largePage<this.lastLargePage){var e=Math.abs(this.maxScrollPos-this.scrollPos);this.largePage++,this.pageChange(),console.log("pageChange up",e),this.scrollPos=this.tableRef.nativeElement.scrollTop=this.largePage<=1?this.rowHeight:e+1}else if(this.scrollPos<=0&&this.largePage>0){var n=Math.abs(this.scrollPos);this.largePage--,this.pageChange(),console.log("pageChange down",n),this.scrollPos=this.tableRef.nativeElement.scrollTop=this.largePage>=1?this.maxScrollPos-1:this.maxScrollPos-this.rowHeight-n}this.updateRows(),this.scrollPercent=this.rowStart/this.adjustedTotalsize,this.manualScroll||(this.scrollerRef.nativeElement.scrollTop=(this.maxScrollPos+this.notfittingRowHeight)*this.scrollPercent),this.updateDataSource(),this.prevScrollPos=this.scrollPos,this.scrollLeft=this.tableRef.nativeElement.scrollLeft,this.headerRef&&(this.headerRef.nativeElement.style.marginLeft=-this.tableRef.nativeElement.scrollLeft+"px")},t.prototype.updateDataSource=function(t){void 0===t&&(t=!1);var e=this.dataSource.viewpos,n=this.dataSource.viewpos+Math.min(this.dataSource.state.count,this.totalsize-1);if((t||n-e+1!==this.totalsize)&&(t||e!==this.rowStart||n!==this.rowEnd)){this.refreshVrows();var i=Math.ceil(this.viewportSize/this.rowHeight)+1,o=Math.max(this.visibleRowCount-2,i-2);this.dataSource.state.count=o,this.dataSource.state.cursorpos=this.dataSource.cursorAbsPos-this.rowStart,this.dataSource.triggerLoadData.next(),this.cd.detectChanges()}},t.prototype.isEllipsisActive=function(t){return t.offsetWidth<t.scrollWidth},t.prototype.pageChange=function(){this.maxScrollPos=Math.floor(this.largePageSize*this.rowHeight),this.fakeScrollerHeight=this.maxScrollPos+(this.visibleRowCount-1)*this.rowHeight,this.fakeContentRef.nativeElement.style.height=this.fakeScrollerHeight+"px",this.largePage>this.lastLargePage&&(this.largePage=this.lastLargePage,this.scrollPos=this.tableRef.nativeElement.scrollTop=this.rowCountOnLastLargePage*this.rowHeight-1),this.largePageCoeff=this.largePage-1>=0?1:0},t.prototype.updateSize=function(){this.activeRow>this.totalsize-1?this.activeRow=this.totalsize-1:this.activeRow<0&&(this.activeRow=0),this.viewportSize=this.tableRef.nativeElement.clientHeight,this.visibleRowCount=Math.ceil(this.viewportSize/this.rowHeight)+1,-1===this.totalsize&&(this.totalsize=this.visibleRowCount),this.visibleRowCount=this.visibleRowCount>this.totalsize?this.totalsize:this.visibleRowCount,this.notfittingRowHeight=this.rowHeight-this.viewportSize%this.rowHeight,this.calculatedLargePageSize=Math.floor(.5*this.browserMaxSize/this.rowHeight),this.calculatedLargePageSize=15e3,this.adjustedTotalsize=this.totalsize-(this.visibleRowCount-1),this.lastLargePage=Math.floor(this.adjustedTotalsize/this.calculatedLargePageSize),this.rowCountOnLastLargePage=this.adjustedTotalsize%this.calculatedLargePageSize,this.largePageSize=this.adjustedTotalsize>this.calculatedLargePageSize?this.calculatedLargePageSize:this.adjustedTotalsize;var t=Math.abs(this.visibleRowCount-this.vrows.length);if(this.vrows.length<this.visibleRowCount)for(var e=0;e<t;e++)this.vrows.push({virtualId:this.vrows.length,absoluteId:this.vrows.length,pos:0});else if(this.vrows.length>this.visibleRowCount)for(e=0;e<t;e++)this.vrows.pop();this.vrows.forEach(function(t){t.pos=0}),this.maxScrollPos=Math.floor(this.largePageSize*this.rowHeight),this.scrollerContentRef.nativeElement.style.height=this.largePageSize*this.rowHeight+(this.visibleRowCount-1)*this.rowHeight+"px",this.dataSource.totalsize<this.calculatedLargePageSize?(this.renderer.setStyle(this.tableRef.nativeElement,"width","100%"),this.renderer.setStyle(this.tableRef.nativeElement,"padding-right","0")):(this.renderer.setStyle(this.tableRef.nativeElement,"width","calc(100% + "+this.scrollBarWidth+"px)"),this.renderer.setStyle(this.tableRef.nativeElement,"padding-right",this.scrollBarWidth+"px"))},t.prototype.updateRowStartEnd=function(){this.scrollPosCoeff=Math.floor(this.scrollPos/this.rowHeight),this.smallPage=Math.floor(this.scrollPosCoeff/this.visibleRowCount),this.scrollPosCoeffNormal=this.scrollPosCoeff-this.smallPage*this.visibleRowCount,this.rowStart=this.scrollPosCoeff+this.largePage*this.largePageSize-this.largePageCoeff,this.rowEnd=Math.max(this.rowStart+this.visibleRowCount-1-1,this.rowStart)},t.prototype.updateRows=function(){this.updateRowStartEnd();for(var t=0,e=this.vrows;t<e.length;t++)this.updateRow(e[t])},t.prototype.updateRow=function(t){var e=t.virtualId+this.visibleRowCount*this.smallPage+this.largePage*(this.largePageSize-1)+this.largePageCoeff*(this.largePage-1);t.virtualId<this.scrollPosCoeffNormal?(e+=this.visibleRowCount)<this.totalsize&&(t.absoluteId=e,t.pos=t.virtualId*this.rowHeight+this.visibleRowCount*this.rowHeight+this.smallPage*this.rowHeight*this.visibleRowCount):(t.absoluteId=e,t.absoluteId<this.totalsize&&(t.pos=t.virtualId*this.rowHeight+this.smallPage*this.rowHeight*this.visibleRowCount))},t.prototype.refreshVrows=function(){for(var t=0,e=this.vrows;t<e.length;t++){var n=e[t],i=this.dataSource.buffer.get(n.absoluteId);n.data=i}},t.prototype.calculateScrollers=function(){var t="hidden";return this.tableRef&&this.tableRef.nativeElement&&(t=this.cumulatedColumnWidth>this.tableRef.nativeElement.clientWidth?"scroll":"hidden"),{"overflow-x":t}},t.prototype.calculateWidths=function(){if(this.bodyRef.nativeElement.children[0]){this.fakeContentRef.nativeElement.style.width="1px";var t=this.bodyRef.nativeElement.clientWidth;if(this.scrollBarWidth=this.tableRef.nativeElement.offsetWidth-this.tableRef.nativeElement.clientWidth,this.scrollerRef.nativeElement.style.width=this.scrollBarWidth+"px",0==this.columnWidths.length&&this.calculateInitialWidths(),this.columnsExpandableWidth&&t>this.cumulatedColumnMinWidth&&this.cumulatedColumnMinWidth>0)for(var e=0;e<this.dataSource.columns.length;e++){var n=t/this.cumulatedColumnMinWidth,i=0;this.cumulatedColumnWidth=0;for(var o=0;o<this.dataSource.columns.length;o++)this.columnWidths[o]=this.columnMinWidths[o]*n,this.cumulatedColumnWidth+=this.columnWidths[o],this.colPositions[o]=0==o?0:this.colPositions[o-1]+this.columnWidths[o-1],this.stickyBreakpoints[o]=i,this.dataSource.columns[o].sticky&&(i+=this.columnWidths[o])}this.witdhInRequest&&(this.dataSource.state.columnWidths=this.columnWidths)}else console.log("returned")},t.prototype.calculateInitialWidths=function(){var t=0;this.cumulatedColumnWidth=0,this.cumulatedColumnMinWidth=0;for(var e=0;e<this.dataSource.columns.length;e++){var n=this.dataSource.columns[e];this.columnMinWidths[e]=this.columnWidths[e]=10*n.length,this.cumulatedColumnWidth+=this.columnWidths[e],this.cumulatedColumnMinWidth+=this.columnMinWidths[e],this.colPositions[e]=0==e?0:this.colPositions[e-1]+this.columnWidths[e-1],this.stickyBreakpoints[e]=t,n.sticky&&(t+=this.columnWidths[e])}},t.prototype.getVisibleColumns=function(){if(this.tableRef&&this.tableRef.nativeElement){for(var t=this.tableRef.nativeElement.clientWidth,e=this.tableRef.nativeElement.scrollLeft,n=0,i=this.dataSource.columns.length-1,o=[],a=[],r=0;r<this.dataSource.columns.length;r++){var s=this.dataSource.columns[r],l=this.colPositions[r];if(l+this.columnWidths[r]<e&&(s.sticky&&o.push(s),n=r+1),l>=t+e){s.sticky&&a.push(s),i=r;break}}return o.concat(this.dataSource.columns.slice(n,i+1))}return this.dataSource.columns},t.prototype.calcMaxBrowserScrollSize=function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.left="99999999999999px",e.top="9999999999999999px",document.body.appendChild(t);var n=t.getBoundingClientRect().top;return document.body.removeChild(t),n},t.prototype.updateColumns=function(){var t=this;this.dataSource.columns=[],this.dataSource.keyIds=[],this.columns.forEach(function(e,n){var i={description:t.sanitizer.bypassSecurityTrustHtml(e.description),length:e.length,id:e.id,style:e.style,index:n,sticky:e.sticky,containerStyle:e.containerStyle,headerStyle:e.headerStyle,headerContainerStyle:e.headerContainerStyle,extraCellDefinitions:e.extraCellDefinitions,align:e.align,format:e.format,type:e.type};t.dataSource.columns.push(i),t.dataSource.keyIds.push(e.id)})},t.prototype.format=function(t,e){return this.formatService.format(t,e)},t.prototype.getHeaderContainerStyle=function(t,e){var n=this.columnWidths[e]+(e===this.dataSource.columns.length-1?this.scrollBarWidth:0),i=Object.assign({width:n+"px","max-width":n+"px","min-width":n+"px","text-align":t.align?t.align:"left"},t.headerContainerStyle);return this.handleSticky(Object(r.cloneDeep)(i),t,e)},t.prototype.getHeaderStyle=function(t,e){return t.headerStyle},t.prototype.getRowStyle=function(t){var e={height:this.rowHeight+"px",transform:"translateY("+t.pos+"px)",width:this.cumulatedColumnWidth+"px"};return t.absoluteId===this.dataSource.cursorAbsPos&&(this.selectedVrow=t,this.selectedRowStyle&&Object.assign(e,this.isFocused?this.selectedRowStyle:this.inactiveSelectedRowStyle)),e},t.prototype.getContainerStyle=function(t,e,n,i,o){var a=Object.assign({width:this.columnWidths[n]+"px","max-width":this.columnWidths[n]+"px","min-width":this.columnWidths[n]+"px"},t.containerStyle),r=e&&e.styles&&e.styles[t.id]&&e.styles[t.id].containerStyle;return r&&Object.assign(a,r),i.absoluteId===this.dataSource.cursorAbsPos&&n===this.dataSource.state.selectedColumnIndex&&(this.selectedCellDiv=o,Object.assign(a,this.isFocused?this.selectedCellStyle:this.inactiveSelectedCellStyle)),this.activeRow===i.absoluteId&&n===this.dataSource.state.navigationColumnIndex&&Object.assign(a,this.isFocused?this.navigationCellStyle:this.inactiveNavigationCellStyle),this.handleSticky(a,t,n,i)},t.prototype.handleSticky=function(t,e,n,i){void 0===i&&(i=null);var o=this.colPositions[n];if(e.sticky){var a=this.tableRef.nativeElement.scrollLeft,r=o-this.stickyBreakpoints[n];a>r&&(o+=a-r,t.background="rgba(var(--theme-background-300), 1)",i&&i.absoluteId===this.dataSource.cursorAbsPos&&this.selectedRowStyle&&Object.assign(t,this.isFocused?this.selectedRowStyle:this.inactiveSelectedRowStyle),t["box-shadow"]="3px 0px 2px 2px #00000040",t["z-index"]=2)}return t.left=o+"px",t},t.prototype.getStyle=function(t,e,n){return e&&e.styles&&e.styles[t.id]&&e.styles[t.id].style},t.prototype.getBarStyle=function(t,e,n){return e&&e.styles&&e.styles[t.id]&&e.styles[t.id].barStyle},t.prototype.getCellContent=function(t,e){var n,i;return(null===(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.data)||void 0===i?void 0:i.processedData)?t.data.data.processedData["$"+e.id]?t.data.data.processedData["$"+e.id]:t.data.data.processedData[e.id]:""},t.prototype.mouseEnter=function(t,e,n,i,o,r){var s=this;if(void 0===r&&(r=null),clearTimeout(this.tooltipTimeout),this.tooltipService.removeAnyTooltip(),this.isEllipsisActive(e)&&(i||r)){var l;this.tooltipTimeout=setTimeout(function(){var e,c="",u="";(null===(e=null==i?void 0:i.data)||void 0===e?void 0:e.data)?(c=s.format(s.getCellContent(i,o),o.format),s.getStyle(o,i.data.data,n),u=s.sanitizer.sanitize(a.SecurityContext.HTML,c)):r&&(u=s.sanitizer.sanitize(a.SecurityContext.HTML,r)),l=s.tooltipService.createTooltip(u,t)},500);var c=this.renderer.listen(t,"mouseleave",function(t){clearTimeout(s.tooltipTimeout),l&&s.tooltipService.removeTooltip(l),c()});this.eventListeners["mouseleave_"+n]&&this.eventListeners["mouseleave_"+n](),this.eventListeners["mouseleave_"+n]=c}},t.prototype.colDblClick=function(t,e){for(var n=0;n<this.columnWidths.length;n++)this.columnMinWidths[n]=this.columnWidths[n];this.cumulatedColumnMinWidth=this.cumulatedColumnWidth,this.columnsExpandableWidth=!0,this.calculateWidths()},t.prototype.colDragEvent=function(t,e){if(null==t){for(var n=0;n<this.columnWidths.length;n++)this.columnMinWidths[n]=this.columnWidths[n];return this.cumulatedColumnMinWidth=this.cumulatedColumnWidth,this.columnsExpandableWidth=!0,void this.calculateWidths()}if(0!=t.dX){var i=this.colPositions.length-1;if(!(i<1)){if(t.dX>0)for(this.columnWidths[e]+=t.dX,n=e+1;n<=i;n++)this.colPositions[n]+=t.dX;else{if(!(this.columnWidths[e]>15))return;for(this.columnWidths[e]+t.dX<15&&(t.dX=15-this.columnWidths[e]),this.columnWidths[e]+=t.dX,n=e+1;n<=i;n++)this.colPositions[n]+=t.dX}for(this.columnsExpandableWidth=!1,this.cumulatedColumnWidth=0,n=0;n<=i;n++)this.columnMinWidths[n]=this.columnWidths[n],this.cumulatedColumnWidth+=this.columnWidths[n];this.cumulatedColumnMinWidth=this.cumulatedColumnWidth}}},t.prototype.trackByFn=function(t,e){return e.absoluteId},t.prototype.trackByFnCell=function(t,e){return e.id},t.prototype.ngOnDestroy=function(){var t=this;this.removeEditOverlay(),this.dataSource&&this.dataSource.disconnect(),this.timeoutHelper&&clearTimeout(this.timeoutHelper),this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),Object.keys(this.eventListeners).forEach(function(e){t.eventListeners[e]()}),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](i.PLUGIN_CONTEXT),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](i.FormatService),a["\u0275\u0275directiveInject"](d.DomSanitizer),a["\u0275\u0275directiveInject"](h.Overlay),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](a.Renderer2),a["\u0275\u0275directiveInject"](i.TooltipService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-table2"]],viewQuery:function(t,e){if(1&t&&(a["\u0275\u0275staticViewQuery"](R,!0,a.ElementRef),a["\u0275\u0275staticViewQuery"](O,!0,a.ElementRef),a["\u0275\u0275staticViewQuery"](M,!0,a.ElementRef),a["\u0275\u0275staticViewQuery"](E,!0,a.ElementRef),a["\u0275\u0275staticViewQuery"](_,!0),a["\u0275\u0275viewQuery"](k,!0),a["\u0275\u0275staticViewQuery"](I,!0)),2&t){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.tableRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.scrollerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.fakeContentRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.scrollerContentRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.bodyRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.headerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.mainRef=n.first)}},hostBindings:function(t,e){1&t&&a["\u0275\u0275listener"]("focus",function(t){return e.focusEvent(t)})("blur",function(t){return e.blurEvent(t)})("mouseup",function(t){return e.mouseUp(t)},!1,a["\u0275\u0275resolveDocument"])("keydown",function(t){return e.onKeydownHandler(t)})},inputs:{dataSource:"dataSource",columns:"columns",indexes:"indexes",autoRefresh:"autoRefresh",oddRowStyle:"oddRowStyle",headerHeight:"headerHeight",rowHeight:"rowHeight",hideHeader:"hideHeader",simpleNavigation:"simpleNavigation",debug:"debug",selectedRowStyle:"selectedRowStyle",selectedCellStyle:"selectedCellStyle",tableStyle:"tableStyle",inactiveSelectedRowStyle:"inactiveSelectedRowStyle",inactiveSelectedCellStyle:"inactiveSelectedCellStyle",navigationCellStyle:"navigationCellStyle",inactiveNavigationCellStyle:"inactiveNavigationCellStyle",resizableColumns:"resizableColumns",witdhInRequest:"witdhInRequest",keyOverrides:"keyOverrides"},outputs:{valueChange:"valueChange",cellClick:"cellClick",cellChange:"cellChange",cellDoubleClick:"cellDoubleClick",headerCellClick:"headerCellClick",cellContextMenu:"cellContextMenu",headerCellContextMenu:"headerCellContextMenu"},decls:19,vars:21,consts:[[1,"mainwrapper","admino-table",3,"ngStyle"],["mainRef",""],[4,"ngIf"],["class","aheader",3,"ngStyle",4,"ngIf"],[1,"awrapper",3,"ngClass"],["tabIndex","-1",1,"scroller",3,"ngClass","mousedown","scroll"],["scrollerRef",""],[1,"scrollercontent"],["scrollerContentRef",""],[1,"rowindicator",3,"ngClass"],[1,"atable",3,"ngStyle","scroll"],["tableRef",""],[1,"abody"],["bodyRef",""],[1,"fakecontent",3,"ngStyle"],["fakeContentRef",""],["class","arow",3,"ngClass","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["class","divider","admDrag","",3,"ngStyle","admDragEvent","dblclick",4,"ngFor","ngForOf"],["admDrag","",1,"divider",3,"ngStyle","admDragEvent","dblclick"],[1,"aheader",3,"ngStyle"],["headerRef",""],["class","ahcell",3,"ngStyle","ngClass","click","contextmenu","mouseenter",4,"ngFor","ngForOf"],[1,"ahcell",3,"ngStyle","ngClass","click","contextmenu","mouseenter"],["headerCellRef",""],[1,"cell-content",3,"innerHTML","ngStyle"],["headerCellContentRef",""],[1,"arow",3,"ngClass","ngStyle"],["class","acell",3,"ngClass","id","ngStyle","click","dblclick","contextmenu","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"acell",3,"ngClass","id","ngStyle","click","dblclick","contextmenu","mouseenter"],["cellRef",""],["class","rowbg",3,"ngStyle",4,"ngIf"],[1,"cell-content",3,"ngStyle","innerHtml"],["cellContentRef",""],["class","bar",3,"ngStyle",4,"ngIf"],[1,"rowbg",3,"ngStyle"],[1,"bar",3,"ngStyle"],[1,"row","debug"],[1,"col-6"],[1,"color-accent"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0,1),a["\u0275\u0275template"](2,j,2,1,"ng-container",2),a["\u0275\u0275template"](3,T,3,4,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"div",5,6),a["\u0275\u0275listener"]("mousedown",function(){return e.scrollbarMouseDown()})("scroll",function(t){return e.scrollbarScroll(t)}),a["\u0275\u0275element"](7,"div",7,8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",9),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",10,11),a["\u0275\u0275listener"]("scroll",function(){return e.scrollEvent()}),a["\u0275\u0275elementStart"](13,"div",12,13),a["\u0275\u0275element"](15,"div",14,15),a["\u0275\u0275template"](17,U,2,8,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,N,129,40,"ng-container",2),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngStyle",e.tableStyle),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.resizableColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.hideHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](12,$,!e.dataSource.initialBrowseRequestHappend)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](14,X,e.dataSource.totalsize<e.calculatedLargePageSize)),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction2"](16,Y,e.showIndicator()&&e.dataSource.initialBrowseRequestHappend,e.scrollDirection>=1)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.scrollDirection?e.rowEnd+1:e.rowStart+1," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",e.calculateScrollers()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](19,Q,e.cumulatedColumnWidth+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.vrows)("ngForTrackBy",e.trackByFn),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.debug))},directives:[f.NgStyle,f.NgIf,f.NgClass,f.NgForOf,P],pipes:[f.DecimalPipe],styles:['[_nghost-%COMP%]{position:relative;height:100%;width:100%;display:inline-block}[_nghost-%COMP%]  .acell:hover .adm-m, [_nghost-%COMP%]  .ahcell:hover .adm-m{display:flex;pointer-events:all}[_nghost-%COMP%]  .acell .adm-m, [_nghost-%COMP%]  .ahcell .adm-m{display:none;pointer-events:none;position:absolute;z-index:1000;top:0;right:0;padding:3px;background-color:rgba(var(--theme-background-500),1);border-bottom-left-radius:5px;box-shadow:0 0 10px 0 rgba(var(--theme-background-900),.5)}[_nghost-%COMP%]     .adm-table-bottom-left, [_nghost-%COMP%]     .adm-table-bottom-right, [_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-minus-right, [_nghost-%COMP%]     .adm-table-plus-left, [_nghost-%COMP%]     .adm-table-plus-right, [_nghost-%COMP%]     .adm-table-top-left, [_nghost-%COMP%]     .adm-table-top-right{position:absolute;top:0;right:0;font-size:.85em;padding:.5em}[_nghost-%COMP%]     .adm-table-bottom-left, [_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-plus-left, [_nghost-%COMP%]     .adm-table-top-left{right:auto;left:0}[_nghost-%COMP%]     .adm-table-bottom-right, [_nghost-%COMP%]     .adm-table-top-right{opacity:.5}[_nghost-%COMP%]     .adm-table-bottom-left, [_nghost-%COMP%]     .adm-table-bottom-right{top:auto;bottom:0}[_nghost-%COMP%]     .adm-table-plus-left, [_nghost-%COMP%]     .adm-table-plus-right{color:rgba(var(--theme-primary-500),1)}[_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-minus-right{color:rgb(var(--theme-warn-500))}.debug[_ngcontent-%COMP%]{height:400px}.mainwrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative;border:0 solid rgba(var(--theme-background-900),.5);background:rgba(var(--theme-background-400),1)}.mainwrapper[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:100%;width:10px;background-color:rgba(var(--theme-primary-500),1);position:absolute;z-index:10;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:col-resize;opacity:0;transition:opacity .2s}.mainwrapper[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:hover{opacity:.2}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]{height:51px;min-width:100%;display:flex;border-bottom:1px solid rgba(var(--theme-foreground-500),.1);overflow:hidden;position:relative}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell[_ngcontent-%COMP%]{position:absolute;height:100%;max-width:100%;min-width:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;border-left:1px solid rgba(var(--theme-foreground-500),.1);cursor:pointer}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell.first[_ngcontent-%COMP%]{border-left-width:0}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell.last[_ngcontent-%COMP%]{border-right:1px solid rgba(var(--theme-foreground-500),.1)}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{align-self:center;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px;padding-right:10px}.mainwrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.mainwrapper[_ngcontent-%COMP%]   .awrapper.hidetable[_ngcontent-%COMP%]{opacity:0}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]{width:10px;height:100%;position:absolute;right:0;z-index:10;overflow:hidden;overflow-y:auto}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]   .scrollercontent[_ngcontent-%COMP%]{width:1px}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator[_ngcontent-%COMP%]{position:absolute;background-color:rgba(var(--theme-background-300),1);border-radius:7px;padding:1px 7px;z-index:4;font-size:12px;font-weight:500;top:10px;left:10px;opacity:0;transition:opacity .5s;pointer-events:none}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator.bottom[_ngcontent-%COMP%]{top:auto;bottom:10px}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator.show[_ngcontent-%COMP%]{opacity:1}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:auto;overflow-y:auto;position:relative}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .fakecontent[_ngcontent-%COMP%]{position:absolute;width:1px;pointer-events:none}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]{width:100%;min-height:1px;position:relative}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]{display:flex;position:absolute;min-width:100%;overflow:hidden}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.rowselected[_ngcontent-%COMP%]{box-shadow:inset 0 0 1px 1px rgba(var(--theme-foreground-500),.2);background-color:rgba(var(--theme-background-700),.3)}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.evenrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .rowbg[_ngcontent-%COMP%]{content:"";width:100%;height:100%;position:absolute;top:0;opacity:.02}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.lastrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{height:100%;box-sizing:border-box;border-top-width:1px;border-top-style:solid;border-left-width:1px;border-left-style:solid;position:relative;max-width:100%;min-width:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;position:absolute}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{display:none;position:absolute;top:0;height:100%;width:100%;background:red;transition:width .3s ease-in-out,background-color .3s ease-in-out}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.first[_ngcontent-%COMP%]{border-left-width:0}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.last[_ngcontent-%COMP%]{border-right-width:1px;border-right-style:solid}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{z-index:1;align-self:center;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px;padding-right:10px;white-space:pre}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.evenrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .rowbg[_ngcontent-%COMP%]{background-color:rgba(var(--theme-foreground-500),1)}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{border-color:rgba(var(--theme-foreground-500),.1)}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.columnnavigation[_ngcontent-%COMP%], .awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.columnselected[_ngcontent-%COMP%]{box-shadow:inset 0 0 1px 1px rgba(var(--theme-foreground-500),.5)}']}),t}(),G=n("17wl"),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(G.__extends)(e,t),e.prototype.onCreate=function(t,e){var n=this;this.valueChangeSub=this.context.control.valueChanges.pipe(Object(l.takeUntil)(this.context.destroy$),Object(l.filter)(function(t){var e;return!Object(r.isEqual)(null===(e=n.oldVal)||void 0===e?void 0:e.keys,null==t?void 0:t.keys)})).subscribe(function(t){n.pluginInstance.table.setPrevValues(),n.fire("keyChange").subscribe(),n.oldVal=Object(r.cloneDeep)(t)})},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){this.valueChangeSub&&this.valueChangeSub.unsubscribe()},e}(i.InteractionBase),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(G.__extends)(e,t),e.prototype.onCreate=function(t,e){var n=this;this.context.pluginComponentRef.instance.cellContextMenu$.pipe(Object(l.takeUntil)(this.destroy$)).subscribe(function(t){var i=t.e;i.preventDefault(),e.config.items&&n.context.action.handleResponse({setContextMenu:{items:e.config.items,x:i.clientX,y:i.clientY,__context:n.context}}),e.actions&&n.fire({x:i.clientX,y:i.clientY,keys:t.keys,column:t.column,rowAbsoluteIndex:t.rowAbsoluteIndex},function(t){return t.setContextMenu&&(t.setContextMenu.x=i.clientX,t.setContextMenu.y=i.clientY,t.setContextMenu.__context=n.context),t}).subscribe()})},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){},e}(i.InteractionBase),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(G.__extends)(e,t),e.prototype.onCreate=function(t,e){var n=this;this.context.pluginComponentRef.instance.headerCellContextMenu$.pipe(Object(l.takeUntil)(this.destroy$)).subscribe(function(t){var i=t.e;i.preventDefault(),e.config.items&&n.context.action.handleResponse({setContextMenu:{items:e.config.items,x:i.clientX,y:i.clientY,__context:n.context}}),e.actions&&n.fire({x:i.clientX,y:i.clientY,keys:t.keys,column:t.column,rowAbsoluteIndex:t.rowAbsoluteIndex},function(t){return t.setContextMenu&&(t.setContextMenu.x=i.clientX,t.setContextMenu.y=i.clientY,t.setContextMenu.__context=n.context),t}).subscribe()})},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){},e}(i.InteractionBase),et=function(){function t(t,e,n){this.context=t,this.sanitizer=e,this.cd=n,this.cellContextMenu$=new s.Subject,this.headerCellContextMenu$=new s.Subject,this.isFocused=!1,this.context.registerInteraction("cellContextMenu",Z),this.context.registerInteraction("headerCellContextMenu",tt),this.context.registerInteraction("keyChange",J)}return t.prototype.ngOnInit=function(){var t=this,e=this.context.pluginConfig;this.dataSource=new u({listFunction:function(n,i,o,a,r,s,l,c){return t.context.api.list(e.config.viewName,n,i,o,a,r,s,l,e.config.customVars,c)}},this.sanitizer),this.context.redraw$.pipe(Object(l.takeUntil)(this.context.destroy$),Object(l.debounceTime)(500)).subscribe(function(e){t.table.resize(null),t.table.updateDataSource(),t.cd.markForCheck()}),this.context.update$.pipe(Object(l.takeUntil)(this.context.destroy$)).subscribe(function(e){t.onChange(e),t.cd.markForCheck()})},t.prototype.ngAfterViewInit=function(){var t=this;this.context.pluginConfig.value?(this.dataSource.state=Object.assign(this.dataSource.state,this.context.pluginConfig.value),this.dataSource.setKeys(this.context.pluginConfig.value.keys),this.table.init(),this.timeoutHelper=setTimeout(function(e){t.table.reinit(),Object(s.from)(t.table.dataSource.loadData()).pipe(Object(l.takeUntil)(t.context.destroy$)).subscribe(function(e){t.table.gotoPos(t.dataSource.viewpos),t.table.setActiveRow(t.dataSource.cursorAbsPos),t.table.scrollEvent(),t.table.updateRows(),t.table.refreshVrows(),t.table.updateSize()})})):this.table.init(!0)},t.prototype.setValue=function(t){this.context.control.setValue(t)},t.prototype.handleCellChange=function(t){this.context.firePluginInteractions("cellChange").subscribe()},t.prototype.handleCellClick=function(t){this.context.firePluginInteractions("cellClick",t).subscribe()},t.prototype.handleCellDoubleClick=function(t){this.context.firePluginInteractions("cellDoubleClick",t).subscribe()},t.prototype.handleHeaderCellClick=function(t){this.context.firePluginInteractions("headerCellClick").subscribe()},t.prototype.handleCellContextMenu=function(t){this.cellContextMenu$.next(t)},t.prototype.handleHeaderCellContextMenu=function(t){this.headerCellContextMenu$.next(t)},t.prototype.onChange=function(t){var e,n,o,a=this,c=t.compareResult.diff,d=Object(i.deepCompare)(null===(e=t.prevConfig)||void 0===e?void 0:e.config,null===(n=t.newConfig)||void 0===n?void 0:n.config),h=t.commands,p=d.diff,g=this.context.pluginConfig.config,f=!1;if(p.viewName&&(this.dataSource.clearRequests(),this.dataSource.buffer.clearAll(),this.dataSource.initialBrowseRequestHappend=!1,this.dataSource=new u({listFunction:function(t,e,n,i,o,r,s,l){return a.context.api.list(a.context.pluginConfig.config.viewName,t,e,n,i,o,r,s,a.context.pluginConfig.config.customVars,l)}},this.sanitizer),f=!0),h.clearCache&&(this.dataSource.buffer.clearAll(),f=!0),h.simulateKey&&this.table.onKeydownHandler({preventDefault:function(){return null},key:h.simulateKey}),p.columns&&(f=!0,this.table.columns=g.columns),p.indexes&&(this.table.indexes=g.indexes),p.rowHeight&&(f=!0),r.isNil(c.value)||(this.dataSource.state=Object.assign(this.dataSource.state,t.newConfig.value),(null===(o=t.newConfig.value)||void 0===o?void 0:o.keys)&&this.dataSource.setKeys(t.newConfig.value.keys)),p.hidden&&(f=!0),f&&(this.cd.detectChanges(),this.table.reinit()),c.value||h.forceRefresh){var m=r.isNil(t.newConfig.value)||void 0===t.newConfig.value.shift?0:t.newConfig.value.shift;h.forceRefresh&&(this.dataSource.state.successfulDataUpdate=!1);var v=this.table.dataSource.autoRefresh;this.table.dataSource.autoRefresh=0,this.table.dataSource.setAutoRefresh(),Object(s.from)(this.table.dataSource.loadData(m)).pipe(Object(l.takeUntil)(this.context.destroy$)).subscribe(function(t){a.table.gotoPos(a.dataSource.viewpos),c.value&&a.table.setActiveRow(a.dataSource.cursorAbsPos),a.table.scrollEvent(),a.table.updateRows(),a.table.refreshVrows(),a.table.dataSource.autoRefresh=v,a.table.dataSource.setAutoRefresh()},function(){a.table.dataSource.autoRefresh=v,a.table.dataSource.setAutoRefresh()})}},t.prototype.onDestroy=function(){clearTimeout(this.timeoutHelper)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](i.PLUGIN_CONTEXT),a["\u0275\u0275directiveInject"](d.DomSanitizer),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["app-table"]],viewQuery:function(t,e){var n;1&t&&a["\u0275\u0275staticViewQuery"](K,!0),2&t&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.table=n.first)},decls:1,vars:19,consts:[["tabindex","0","data-focus-target","",3,"dataSource","indexes","columns","autoRefresh","simpleNavigation","rowHeight","headerHeight","oddRowStyle","hideHeader","debug","selectedRowStyle","selectedCellStyle","inactiveSelectedRowStyle","inactiveSelectedCellStyle","navigationCellStyle","inactiveNavigationCellStyle","resizableColumns","witdhInRequest","tableStyle","cellClick","cellChange","cellDoubleClick","headerCellClick","valueChange","cellContextMenu","headerCellContextMenu"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"admino-table2",0),a["\u0275\u0275listener"]("cellClick",function(t){return e.handleCellClick(t)})("cellChange",function(t){return e.handleCellChange(t)})("cellDoubleClick",function(t){return e.handleCellDoubleClick(t)})("headerCellClick",function(t){return e.handleHeaderCellClick(t)})("valueChange",function(t){return e.setValue(t)})("cellContextMenu",function(t){return e.handleCellContextMenu(t)})("headerCellContextMenu",function(t){return e.handleHeaderCellContextMenu(t)}),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275property"]("dataSource",e.dataSource)("indexes",e.context.pluginConfig.config.indexes)("columns",e.context.pluginConfig.config.columns)("autoRefresh",e.context.pluginConfig.config.autoRefresh)("simpleNavigation",e.context.pluginConfig.config.simpleNavigation)("rowHeight",e.context.pluginConfig.config.rowHeight)("headerHeight",e.context.pluginConfig.config.headerHeight)("oddRowStyle",e.context.pluginConfig.config.oddRowStyle)("hideHeader",e.context.pluginConfig.config.hideHeader)("debug",e.context.pluginConfig.config.debug)("selectedRowStyle",e.context.pluginConfig.config.selectedRowStyle)("selectedCellStyle",e.context.pluginConfig.config.selectedCellStyle)("inactiveSelectedRowStyle",e.context.pluginConfig.config.inactiveSelectedRowStyle)("inactiveSelectedCellStyle",e.context.pluginConfig.config.inactiveSelectedCellStyle)("navigationCellStyle",e.context.pluginConfig.config.navigationCellStyle)("inactiveNavigationCellStyle",e.context.pluginConfig.config.inactiveNavigationCellStyle)("resizableColumns",e.context.pluginConfig.config.resizableColumns)("witdhInRequest",e.context.pluginConfig.config.witdhInRequest)("tableStyle",e.context.pluginConfig.config.tableStyle)},directives:[K],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:inline-block}"],changeDetection:0}),t}(),nt=function(){function t(){}return t.entry=et,t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[f.CommonModule,o.MatFormFieldModule,o.MatIconModule,o.MatInputModule,o.MatCheckboxModule,o.MatSelectModule,p.ReactiveFormsModule,i.SharedModule]]}),t}();e.default=nt},Vgaj:function(t,e){t.exports=a},YLtl:function(t,e){t.exports=r},aP7H:function(t,e){t.exports=s},cfyg:function(t,e){t.exports=l},"vG+p":function(t,e){t.exports=c},vOrQ:function(t,e){t.exports=u}})});